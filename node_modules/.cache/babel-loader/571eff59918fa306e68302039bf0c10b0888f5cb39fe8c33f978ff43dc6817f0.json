{"ast":null,"code":"import _regeneratorRuntime from\"/Users/a./Downloads/coding/pre-onboarding/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/a./Downloads/coding/pre-onboarding/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/a./Downloads/coding/pre-onboarding/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import TodoList from\"../TodoList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TodoPage(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todos=_useState4[0],setTodos=_useState4[1];useEffect(function(){if(!localStorage.getItem(\"access_token\")){navigate(\"/signin\");}},[]);var todoSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"https://www.pre-onboarding-selection-task.shop/todos\",{todo:text},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"access_token\"))}});case 2:axios.get(\"https://www.pre-onboarding-selection-task.shop/todos\",{headers:{authorization:\"bearer \".concat(localStorage.getItem(\"access_token\"))}}).then(function(res){setTodos(res.data);});case 3:case\"end\":return _context.stop();}},_callee);}));return function todoSubmit(){return _ref.apply(this,arguments);};}();useEffect(function(){axios.get(\"https://www.pre-onboarding-selection-task.shop/todos\",{headers:{authorization:\"bearer \".concat(localStorage.getItem(\"access_token\"))}}).then(function(res){setTodos(res.data);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{\"data-testid\":\"new-todo-input\",className:\"w-56 mr-2 border border-neutral-400\",onChange:function onChange(e){return setText(e.target.value);},value:text}),/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"new-todo-add-button\",className:\"px-2 border bg-slate-300 border-neutral-400\",onClick:function onClick(){todoSubmit();setText(\"\");},children:\"\\uCD94\\uAC00\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:todos.map(function(todo){return/*#__PURE__*/_jsx(TodoList,{id:todo.id,todo:todo.todo,isCompleted:todo.isCompleted,setTodos:setTodos},todo.id);})})]});}export default TodoPage;","map":{"version":3,"names":["axios","useEffect","useState","useNavigate","TodoList","jsx","_jsx","jsxs","_jsxs","TodoPage","navigate","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","todos","setTodos","localStorage","getItem","todoSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","todo","headers","Authorization","concat","get","authorization","then","res","data","stop","apply","arguments","className","children","onChange","e","target","value","onClick","map","id","isCompleted"],"sources":["/Users/a./Downloads/coding/pre-onboarding/client/src/components/pages/TodoPage.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport TodoList from \"../TodoList\";\n\nfunction TodoPage() {\n  const navigate = useNavigate();\n  const [text, setText] = useState(\"\");\n  const [todos, setTodos] = useState([]);\n\n  useEffect(() => {\n    if (!localStorage.getItem(\"access_token\")) {\n      navigate(\"/signin\");\n    }\n  }, []);\n\n  const todoSubmit = async () => {\n    await axios.post(\n      \"https://www.pre-onboarding-selection-task.shop/todos\",\n      { todo: text },\n      {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        },\n      }\n    );\n    axios\n      .get(\"https://www.pre-onboarding-selection-task.shop/todos\", {\n        headers: {\n          authorization: `bearer ${localStorage.getItem(\"access_token\")}`,\n        },\n      })\n      .then((res) => {\n        setTodos(res.data);\n      });\n  };\n\n  useEffect(() => {\n    axios\n      .get(\"https://www.pre-onboarding-selection-task.shop/todos\", {\n        headers: {\n          authorization: `bearer ${localStorage.getItem(\"access_token\")}`,\n        },\n      })\n      .then((res) => {\n        setTodos(res.data);\n      });\n  }, []);\n\n  return (\n    <div className=\"flex flex-col items-center mt-5\">\n      <div className=\"mb-2\">\n        <input\n          data-testid=\"new-todo-input\"\n          className=\"w-56 mr-2 border border-neutral-400\"\n          onChange={(e) => setText(e.target.value)}\n          value={text}\n        />\n        <button\n          data-testid=\"new-todo-add-button\"\n          className=\"px-2 border bg-slate-300 border-neutral-400\"\n          onClick={() => {\n            todoSubmit();\n            setText(\"\");\n          }}\n        >\n          추가\n        </button>\n      </div>\n      <ul>\n        {todos.map((todo) => (\n          <TodoList\n            key={todo.id}\n            id={todo.id}\n            todo={todo.todo}\n            isCompleted={todo.isCompleted}\n            setTodos={setTodos}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default TodoPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}